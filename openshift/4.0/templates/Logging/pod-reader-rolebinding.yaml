kind: Template
apiVersion: v1
metadata:
  name: pods-reader
  annotations:
    openshift.io/display-name: Pod reader rolebinding
    description: Allow default user to read pod's log.
    tags: pims-logging
objects:
  - apiVersion: v1
    kind: ServiceAccount
    metadata:
      name: pims-pod-reader
      namespace: 3cd915-tools

  # Add service account in dev
  - kind: RoleBinding
    apiVersion: rbac.authorization.k8s.io/v1
    metadata:
      name: pims-pod-reader-dev
      namespace: 3cd915-dev
    roleRef:
      kind: ClusterRole
      apiGroup: rbac.authorization.k8s.io
      name: edit
    subjects:
      - kind: ServiceAccount
        name: pims-pod-reader
        namespace: 3cd915-tools

  # Add service account in test
  - kind: RoleBinding
    apiVersion: rbac.authorization.k8s.io/v1
    metadata:
      name: pims-pod-reader-test
      namespace: 3cd915-test
    roleRef:
      kind: ClusterRole
      apiGroup: rbac.authorization.k8s.io
      name: edit
    subjects:
      - kind: ServiceAccount
        name: pims-pod-reader
        namespace: 3cd915-tools

  # Add service account in prod
  - kind: RoleBinding
    apiVersion: rbac.authorization.k8s.io/v1
    metadata:
      name: pims-pod-reader-prod
      namespace: 3cd915-prod
    roleRef:
      kind: ClusterRole
      apiGroup: rbac.authorization.k8s.io
      name: edit
    subjects:
      - kind: ServiceAccount
        name: pims-pod-reader
        namespace: 3cd915-tools